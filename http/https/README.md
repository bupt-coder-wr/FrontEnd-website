### TLS 建立连接过程：

1. 客户端发送 ClientHello（包含支持的协议版本，加密算法和 `随机数A`） 到服务端
2. 服务端返回 ServerHello、公钥、证书、`随机数B` 到客户端
3. 客户端使用 CA 证书验证返回证书无误后。生成 `随机数C`，用公钥对其加密，发送到服务端
4. 服务端用 `私钥`解密得到 `随机数C`，然后根据已经得到的 `随机数ABC生成对称密钥（Hello 时确定的加密算法）`，并对需要发送的数据进行加密发送
5. 客户端使用对称密钥（随机数 ABC 生的对称密钥）对数据进行解密
6. 双方手持对称密钥，使用对称加密算法通信

### 证书认证

证书中含有三部分内容：证书内容，散列算法，加密密文。证书内容会被散列算法 hash 计算出 hash 值，然后使用 CA 机构提供的私钥进行 RSA 加密。

当客户端发起请求时，服务器将该数字证书发送给客户端，客户端通过 CA 机构提供的公钥对加密密文进行解密获得散列值（数字签名），同时将证书内容使用相同的散列算法进行 hash 得到另一个散列值，对比两个散列值，如果相等，则证书没问题。
![https](./Https详细流程.png)
![https](./HTTPS.png)
**数字证书**
